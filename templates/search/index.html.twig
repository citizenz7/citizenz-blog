{% extends 'base.html.twig'%}

{% block title %}Recherche{% endblock %}

{% block body %}
<div class="row pb-5">
  <div class="col-sm-8 mt-3 pr-5 text-justify">
    <h2>Faire une recherche</h2>
    <div class="form-group">
      {% form_theme searchForm 'bootstrap_4_layout.html.twig' %}
      {{ form_start(searchForm) }}
      {{ form_row(searchForm.titre, {'label': 'La recherche s\'effectue sur le titre de l\'article', 'attr': {'placeholder': 'Entrez un mot clé', 'class': 'form-control'}})
      }}
      <button class="btn btn-info">Rechercher</button>
      {{ form_end(searchForm) }}
    </div>

    {% if app.request.method == 'POST' %}
    <div class="mt-5">
      {% if articles | length == 0 %}
      <h4>Aucun résulat pour votre recherche <i class="fas fa-sad-tear"></i></h4>
      {% else %}
      <h3 class="mt-3">Résulats de votre recherche :</h3>
      {% for article in articles %}
      <div class="mt-3 py-3 px-3 shadow">
        <h4 class="card-title font-weight-bold">{{ article.titre }}</h4>
        <span class="badge badge-primary p-2 rounded">Publié le {{ article.createdAt | date('d/m/Y') }}</span>
        <span class="badge badge-warning p-2 rounded">{{ article.categorie.titre }}</span>
        <p class="card-text text-justify text-muted">
          {{ article.contenu | slice(0, 250) | raw }} ...
        </p>
        <p class="text-right">
          <a href="{{ path('articles_show', {'slug': article.slug}) }}" class="btn btn-success">Lire l'article</a>
        </p>
      </div>
      {% endfor %}
      <div class="pagination">
        {{ knp_pagination_render(articles) }}
      </div>
      {% endif %}
    </div>
    {% endif %}
  </div>

  {% include('home/sidebar.html.twig') %}

</div>

{% endblock %}