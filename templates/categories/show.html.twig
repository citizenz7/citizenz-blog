{% extends 'base.html.twig' %}

{% block title %}Categorie : {{ categorie.titre }}{% endblock %}

{% block body %}

<div class="row pb-5">
    <div class="col-sm-9 mt-3 pr-5 text-justify">
        <h2>Catégorie : {{ categorie.titre }}</h2>
        <div class="mt-3">
            <b>Description :</b> {{ categorie.description }}
        </div>

        {% if is_granted('ROLE_ADMIN') %}
            <div class="row mt-3">
                <div class="col-sm-1 mt-2">
                    <a class="btn btn-sm btn-info2" href="{{ path('categories_edit', {'slug': categorie.slug}) }}">Editer</a>
                </div>
                <div class="col">
                    {{ include('categories/_delete_form.html.twig') }}
                </div>
            </div>
        {% endif %}

        <hr>
        Nombre d'articles de la catégorie : {{ categorie.articles | length }}
        {% for a in categorie.articles %}
            <div class="card mt-3">
                <div class="card-body">
                    <h4>
                        <a href="{{ path('articles_show', { 'slug': a.slug }) }}">{{ a.titre }}</a>
                    </h4>
                    <img src="{{ a.image }}" alt="{{ a.titre }}" class="img-fluid float-left mr-2 mt-1" style="max-width:100px; width:100%;">
                    {{ a.contenu | slice(0,300) | raw }}
                </div>
            </div>
            
        {% endfor %}
    </div>

    {% block sidebar %}
        {{ sidebar() }}
    {% endblock %}
</div>
{% endblock %}